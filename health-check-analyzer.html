<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥åº·æª¢æŸ¥å ±å‘Šåˆ†æå™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }
        .status-normal { background-color: #f0fdf4; border-left-color: #22c55e; }
        .status-warning { background-color: #fefce8; border-left-color: #eab308; }
        .status-danger { background-color: #fef2f2; border-left-color: #ef4444; }
        .status-info { background-color: #eef2ff; border-left-color: #6366f1; }
        .result-card {
            border-left-width: 4px;
            transition: all 0.3s ease-in-out;
        }
        .summary-card {
             background-color: #fff;
             border: 1px solid #e5e7eb;
             border-radius: 0.75rem;
             padding: 1rem;
             box-shadow: 0 1px 3px 0 rgba(0,0,0,0.1), 0 1px 2px 0 rgba(0,0,0,0.06);
        }
        
        /* CKD Grid Colors with higher contrast */
        .ckd-green { background-color: #bbf7d0; color: #166534; }
        .ckd-yellow { background-color: #fef08a; color: #854d0e; }
        .ckd-orange { background-color: #fed7aa; color: #9a3412; }
        .ckd-red { background-color: #fca5a5; color: #991b1b; }

        .ckd-cell-highlight {
            position: relative;
        }
        .ckd-cell-highlight::after {
            content: '';
            position: absolute;
            top: -4px;
            left: -4px;
            right: -4px;
            bottom: -4px;
            border: 3px solid #3b82f6; /* blue-500 */
            border-radius: 0.5rem;
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
         .ckd-row-highlight {
            position: relative;
        }
        .ckd-row-highlight::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border: 3px solid #3b82f6; /* blue-500 */
            border-radius: 0.5rem;
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">å¥åº·æª¢æŸ¥å ±å‘Šåˆ†æå™¨</h1>
            <p class="mt-2 text-gray-600">è¼¸å…¥æ‚¨çš„å¥æª¢æ•¸æ“šï¼Œç²å–è¦–è¦ºåŒ–å¥åº·ç¸½è¦½ã€ä»£è¬ç—‡å€™ç¾¤èˆ‡æ…¢æ€§è…è‡Ÿç—…(CKD)åˆ†æã€‚</p>
            <p class="mt-1 text-sm text-red-500 font-semibold">æ³¨æ„ï¼šæœ¬å·¥å…·åˆ†æçµæœåƒ…ä¾›åƒè€ƒï¼Œä¸èƒ½å–ä»£å°ˆæ¥­é†«å¸«çš„è¨ºæ–·ã€‚è«‹å‹™å¿…èˆ‡æ‚¨çš„é†«å¸«è¨è«–å ±å‘Šã€‚</p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- è¼¸å…¥å€åŸŸ -->
            <div class="bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-2xl font-bold mb-4 border-b pb-2">1. è¼¸å…¥æ‚¨çš„è³‡æ–™</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                     <div>
                        <label for="gender" class="block text-sm font-medium text-gray-700">ç”Ÿç†æ€§åˆ¥</label>
                        <select id="gender" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                            <option value="male">ç”·æ€§</option>
                            <option value="female">å¥³æ€§</option>
                        </select>
                    </div>
                    <div>
                        <label for="age" class="block text-sm font-medium text-gray-700">å¹´é½¡</label>
                        <input type="number" id="age" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="ä¾‹å¦‚ï¼š60">
                    </div>
                    <div>
                        <label for="height" class="block text-sm font-medium text-gray-700">èº«é«˜ (cm)</label>
                        <input type="number" id="height" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="ä¾‹å¦‚ï¼š175">
                    </div>
                    <div>
                        <label for="weight" class="block text-sm font-medium text-gray-700">é«”é‡ (kg)</label>
                        <input type="number" id="weight" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="ä¾‹å¦‚ï¼š70">
                    </div>
                     <div>
                        <label for="waist" class="block text-sm font-medium text-gray-700">è…°åœ (cm)</label>
                        <input type="number" id="waist" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="ä¾‹å¦‚ï¼š92">
                    </div>
                    <div></div>
                    <div>
                        <label for="sbp" class="block text-sm font-medium text-gray-700">æ”¶ç¸®å£“ (mmHg)</label>
                        <input type="number" id="sbp" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="ä¾‹å¦‚ï¼š145">
                    </div>
                    <div>
                        <label for="dbp" class="block text-sm font-medium text-gray-700">èˆ’å¼µå£“ (mmHg)</label>
                        <input type="number" id="dbp" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="ä¾‹å¦‚ï¼š90">
                    </div>
                </div>

                <div class="mb-4">
                    <label for="lab-results" class="block text-sm font-medium text-gray-700">
                        è²¼ä¸Šå¯¦é©—å®¤æª¢æŸ¥çµæœ
                        <span class="text-xs text-gray-500">(å¯ç›´æ¥å¾å ±å‘ŠPDFæˆ–ç¶²é è¤‡è£½è²¼ä¸Š)</span>
                    </label>
                    <textarea id="lab-results" rows="12" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="ä¾‹å¦‚ï¼š&#10;Creatinine 1.2 mg/dL&#10;HbA1C 7.2 %&#10;..."></textarea>
                </div>

                <button id="analyze-btn" class="w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200">
                    é–‹å§‹åˆ†æ
                </button>
            </div>

            <!-- é‡é»è©•ä¼°èˆ‡å»ºè­°å€åŸŸ -->
            <div id="key-assessments-section" class="bg-white p-6 rounded-xl shadow-md lg:col-span-2">
                 <h2 class="text-2xl font-bold mb-4 border-b pb-2">2. é‡é»å¥åº·è©•ä¼°</h2>
                 <div id="key-assessments-grid" class="space-y-4">
                    <!-- Key summary cards will go here -->
                 </div>
            </div>

            <!-- æ•¸æ“šç¸½è¦½å€åŸŸ -->
            <div id="lab-overview-section" class="bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-2xl font-bold mb-4 border-b pb-2">3. å¯¦é©—å®¤æ•¸æ“šç¸½è¦½</h2>
                <div id="results-grid" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <!-- Other lab results will go here -->
                </div>
            </div>

             <div id="initial-message" class="lg:col-span-3 text-center py-12 text-gray-500">
                <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                  <path vector-effect="non-scaling-stroke" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                <h3 class="mt-2 text-sm font-medium text-gray-900">åˆ†æçµæœå°‡é¡¯ç¤ºæ–¼æ­¤</h3>
                <p class="mt-1 text-sm text-gray-500">è«‹åœ¨å·¦å´è¼¸å…¥æ‚¨çš„è³‡æ–™å¾Œé»æ“Šåˆ†ææŒ‰éˆ•ã€‚</p>
            </div>

        </main>
    </div>

    <script>
        document.getElementById('analyze-btn').addEventListener('click', () => {
            // --- 1. Reset UI ---
            document.getElementById('initial-message').classList.add('hidden');
            ['key-assessments-section', 'lab-overview-section'].forEach(id => {
                document.getElementById(id).classList.remove('hidden');
            });
            const keyAssessmentsGrid = document.getElementById('key-assessments-grid');
            const resultsGrid = document.getElementById('results-grid');
            keyAssessmentsGrid.innerHTML = '';
            resultsGrid.innerHTML = '';

            // --- 2. Data Parsing ---
            const gender = document.getElementById('gender').value;
            const age = parseFloat(document.getElementById('age').value);
            const height = parseFloat(document.getElementById('height').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const waist = parseFloat(document.getElementById('waist').value);
            const sbp = parseFloat(document.getElementById('sbp').value);
            const dbp = parseFloat(document.getElementById('dbp').value);
            const labText = document.getElementById('lab-results').value;

            let allData = {};
            if (height && weight) allData.bmi = parseFloat((weight / (height / 100) ** 2).toFixed(2));
            if (waist) allData.waist = waist;
            if (sbp) allData.sbp = sbp;
            if (dbp) allData.dbp = dbp;
            
            const keywords = {
                'Protein': 'urine_protein', 'å°¿è›‹ç™½': 'urine_protein', 'Sugar': 'urine_sugar', 'å°¿ç³–': 'urine_sugar',
                'Occult blood': 'occult_blood', 'æ½›è¡€': 'occult_blood', 'Leukocyte': 'leukocyte', 'å°¿ç™½è¡€çƒ': 'leukocyte',
                'Nitrite': 'nitrite', 'äºç¡é…¸é¹½': 'nitrite', 'eGFR': 'egfr', 'è…çµ²çƒéæ¿¾ç‡': 'egfr', 'GOT': 'got', 'AST': 'got',
                'GPT': 'gpt', 'ALT': 'gpt', 'Creatinine(U)': 'urine_creatinine', 'Creatinine': 'creatinine', 'è‚Œé…¸é…': 'creatinine',
                'è¡€ç³–': 'glucose', 'é£¯å‰è¡€ç³–': 'glucose', 'ç³–åŒ–è¡€è‰²ç´ ': 'hba1c', 'HbA1C': 'hba1c', 'A1C': 'hba1c',
                'ç¸½è†½å›ºé†‡': 'total_cholesterol', 'T-CHO': 'total_cholesterol', 'ä¸‰é…¸ç”˜æ²¹é…¯': 'triglycerides', 'TG': 'triglycerides',
                'é«˜å¯†åº¦è„‚è›‹ç™½è†½å›ºé†‡': 'hdl', 'HDL-C': 'hdl', 'HDL': 'hdl', 'ä½å¯†åº¦è„‚è›‹ç™½è†½å›ºé†‡': 'ldl', 'LDL-C': 'ldl', 'LDL': 'ldl',
                'å°¿é…¸': 'uric_acid', 'Uric Acid': 'uric_acid', 'HBsAg': 'hbsag', 'Bå‹è‚ç‚è¡¨é¢æŠ—åŸ': 'hbsag',
                'anti-HCV': 'anti_hcv', 'Cå‹è‚ç‚æŠ—é«”': 'anti_hcv', 'ACR': 'acr', 'å°¿ä¸­å¾®é‡ç™½è›‹ç™½': 'acr', 'å°¿æ¶²ç™½è›‹ç™½': 'acr',
                '24å°æ™‚å°¿è›‹ç™½': 'urine_protein_24h'
            };

            labText.split('\n').forEach(line => {
                if (line.match(/WBC\s+\d+-\d+\s*\/HPF/i) || line.match(/RBC\s+\d+-\d+\s*\/HPF/i)) return;
                for (const keyword in keywords) {
                    const keywordRegex = new RegExp(`(^|\\s)${keyword}\\s`, 'i');
                    if (keywordRegex.test(line)) {
                        const valueRegex = new RegExp(`${keyword}[^\\d-+/é™°é™½]*([\\d.]+|[-+]+|é™°æ€§|é™½æ€§|Negative|Positive|Trace)`, 'i');
                        const match = line.match(valueRegex);
                        if (match && match[1] && !allData[keywords[keyword]]) {
                            let value = match[1].trim();
                            if (!isNaN(parseFloat(value))) allData[keywords[keyword]] = parseFloat(value);
                            else {
                                value = value.toLowerCase();
                                if (value.includes('é™°') || value.includes('neg') || value === '-') allData[keywords[keyword]] = 'negative';
                                else if (value.includes('é™½') || value.includes('pos') || value.includes('+') || value.includes('trace')) allData[keywords[keyword]] = 'positive';
                            }
                        }
                    }
                }
            });
            
            // Auto-calculate eGFR if not present
            if (allData.egfr === undefined && allData.creatinine && age) {
                let egfr = 186 * Math.pow(allData.creatinine, -1.154) * Math.pow(age, -0.203);
                if (gender === 'female') {
                    egfr *= 0.742;
                }
                allData.egfr = parseFloat(egfr.toFixed(1));
                allData.egfr_calculated = true; // Flag for UI notification
            }

            if (allData.total_cholesterol && allData.hdl && allData.triglycerides && !allData.ldl) {
                if (allData.triglycerides < 400) allData.ldl = parseFloat((allData.total_cholesterol - allData.hdl - (allData.triglycerides / 5)).toFixed(1));
            }

            // --- 3. Evaluate and Render ---
            const keyAssessments = [
                evaluateMetabolicSyndrome(allData, gender),
                evaluateCKD(allData),
                evaluateHypertension(allData),
                evaluateDiabetes(allData),
                evaluateDyslipidemia(allData, gender)
            ].filter(Boolean);

            keyAssessments.forEach(assessment => {
                keyAssessmentsGrid.appendChild(assessment.cardElement);
            });

            const allItemsForGrid = getAllLabItems(allData, gender);
            allItemsForGrid.forEach(item => {
                resultsGrid.appendChild(createResultCard(item));
            });

            if (keyAssessmentsGrid.children.length === 0 && resultsGrid.children.length === 0) {
                 document.getElementById('initial-message').classList.remove('hidden');
                 document.getElementById('key-assessments-section').classList.add('hidden');
                 document.getElementById('lab-overview-section').classList.add('hidden');
            }
        });

        // --- Key Assessment Evaluation Functions ---
        function evaluateMetabolicSyndrome(data, gender) {
            const criteria = [];
            let metCount = 0;
            if (data.waist !== undefined) { const waistMet = (gender === 'male' && data.waist >= 90) || (gender === 'female' && data.waist >= 80); if (waistMet) metCount++; criteria.push({ name: 'è…¹éƒ¨è‚¥èƒ–', met: waistMet, value: `è…°åœ ${data.waist} cm`});}
            if (data.sbp !== undefined && data.dbp !== undefined) { const bpMet = data.sbp >= 130 || data.dbp >= 85; if (bpMet) metCount++; criteria.push({ name: 'è¡€å£“åé«˜', met: bpMet, value: `è¡€å£“ ${data.sbp}/${data.dbp} mmHg`});}
            if (data.glucose !== undefined) { const glucoseMet = data.glucose >= 100; if (glucoseMet) metCount++; criteria.push({ name: 'ç©ºè…¹è¡€ç³–åé«˜', met: glucoseMet, value: `è¡€ç³– ${data.glucose} mg/dL`});}
            if (data.triglycerides !== undefined) { const tgMet = data.triglycerides >= 150; if (tgMet) metCount++; criteria.push({ name: 'ä¸‰é…¸ç”˜æ²¹é…¯åé«˜', met: tgMet, value: `TG ${data.triglycerides} mg/dL`});}
            if (data.hdl !== undefined) { const hdlMet = (gender === 'male' && data.hdl < 40) || (gender === 'female' && data.hdl < 50); if (hdlMet) metCount++; criteria.push({ name: 'é«˜å¯†åº¦è„‚è›‹ç™½åä½', met: hdlMet, value: `HDL ${data.hdl} mg/dL`});}
            if (criteria.length < 3) return null;
            return { cardElement: createMetabolicSyndromeCard({ hasSyndrome: metCount >= 3, count: metCount, criteria }) };
        }
        function evaluateCKD(data) {
            if (data.egfr === undefined) return null;
            
            let gfrStage;
            if (data.egfr >= 90) gfrStage = 1;
            else if (data.egfr >= 60) gfrStage = 2;
            else if (data.egfr >= 45) gfrStage = 3;
            else if (data.egfr >= 30) gfrStage = 4;
            else if (data.egfr >= 15) gfrStage = 5;
            else gfrStage = 6;

            let albuminuriaStage = 0; // 0 for no data
            if (data.acr !== undefined || data.urine_protein !== undefined){
                if (data.acr >= 300) albuminuriaStage = 3;
                else if (data.acr >= 30) albuminuriaStage = 2;
                else if (data.urine_protein === 'positive') albuminuriaStage = 2;
                else albuminuriaStage = 1;
            }
            
            return { cardElement: createCKDCard(gfrStage, albuminuriaStage, data.egfr, data.acr) };
        }
        function evaluateHypertension(data) {
            if (data.sbp === undefined || data.dbp === undefined) return null;
            let s = 'normal', i = 'ç†æƒ³è¡€å£“', icon = 'âœ…';
            if (data.sbp >= 140 || data.dbp >= 90) { s = 'danger'; i = 'é«˜è¡€å£“'; icon = 'ğŸš¨';}
            else if (data.sbp >= 130 || data.dbp >= 80) { s = 'warning'; i = 'é«˜è¡€å£“å‰æœŸ'; icon = 'âš ï¸';}
            else if (data.sbp >= 120) { s = 'warning'; i = 'è¡€å£“å‡é«˜'; icon = 'âš ï¸';}
            return { cardElement: createSummaryCard({icon, title: 'é«˜è¡€å£“è©•ä¼°', status: s, interpretation: i})};
        }
        function evaluateDiabetes(data) {
            if (data.hba1c === undefined) return null;
            let currentStatus = 1; // 1: normal, 2: pre-diabetes, 3: diabetes
            if (data.hba1c >= 6.5 || (data.glucose && data.glucose >= 126)) currentStatus = 3;
            else if (data.hba1c >= 5.7 || (data.glucose && data.glucose >= 100)) currentStatus = 2;
            
            let suggestion = "å»ºè­°ç”Ÿæ´»å‹æ…‹èª¿æ•´ï¼Œå®šæœŸè¿½è¹¤ã€‚";
            if (currentStatus === 3) {
                 const hasCKD = data.egfr < 60;
                 const hasHighBP = data.sbp >= 140 || data.dbp >= 90;
                 if (hasCKD || hasHighBP) {
                    suggestion = "å› åˆä½µè…è‡Ÿç—…æˆ–é«˜è¡€å£“é¢¨éšªï¼ŒæŒ‡å¼•å»ºè­°å„ªå…ˆè€ƒæ…®<br><b>SGLT2i</b> æˆ– <b>GLP-1 RA</b> é¡è—¥ç‰©ã€‚";
                 } else {
                    suggestion = "æŒ‡å¼•å»ºè­°ç¬¬ä¸€ç·šç”¨è—¥å¯è€ƒæ…® <b>Metformin</b>ã€‚";
                 }
                 suggestion += "<br><span class='text-xs'>è«‹å‹™å¿…èˆ‡æ‚¨çš„é†«å¸«è¨è«–æœ€é©åˆçš„æ²»ç™‚æ–¹æ¡ˆã€‚</span>";
            }
             if (currentStatus === 2) {
                 suggestion = "æ‚¨è™•æ–¼ç³–å°¿ç—…å‰æœŸï¼Œé€™æ˜¯é€†è½‰é—œéµæœŸï¼Œè«‹èˆ‡é†«å¸«è¨è«–ç”Ÿæ´»æ–¹å¼èª¿æ•´è¨ˆç•«ã€‚";
            }

            return { cardElement: createDiabetesCard(currentStatus, suggestion, data.hba1c) };
        }
        function evaluateDyslipidemia(data) {
            const { total_cholesterol, triglycerides, ldl } = data;
            if (total_cholesterol === undefined && triglycerides === undefined && ldl === undefined) return null;
            
            const hasHypertriglyceridemia = triglycerides >= 150;
            const hasHypercholesterolemia = total_cholesterol >= 200 || ldl >= 130;

            if (!hasHypertriglyceridemia && !hasHypercholesterolemia) {
                return { cardElement: createDyslipidemiaCard({isNormal: true}) };
            }

            return { cardElement: createDyslipidemiaCard({hasHypercholesterolemia, hasHypertriglyceridemia}) };
        }

        // --- Get ALL Individual Lab Items for Grid ---
        function getAllLabItems(data, gender) {
            let evaluations = [];
            if(data.bmi !== undefined) evaluations.push({title: 'èº«é«”è³ªé‡æŒ‡æ•¸ (BMI)', value: data.bmi, unit: '', interpretation: data.bmi < 18.5 ? 'é«”é‡éè¼•' : data.bmi >= 27 ? 'è‚¥èƒ–' : data.bmi >= 24 ? 'é«”é‡éé‡' : 'æ­£å¸¸ç¯„åœ', status: data.bmi < 18.5 || data.bmi >= 24 ? 'warning' : 'normal'});
            if(data.waist !== undefined) evaluations.push({title: 'è…°åœ', value: data.waist, unit: 'cm', interpretation: ((gender === 'male' && data.waist >= 90) || (gender === 'female' && data.waist >= 80)) ? 'è…¹éƒ¨è‚¥èƒ–' : 'æ­£å¸¸', status: ((gender === 'male' && data.waist >= 90) || (gender === 'female' && data.waist >= 80)) ? 'danger' : 'normal'});
            if(data.sbp !== undefined && data.dbp !== undefined) evaluations.push({ title: 'è¡€å£“', value: `${data.sbp}/${data.dbp}`, unit: 'mmHg', interpretation: data.sbp >= 140 || data.dbp >= 90 ? 'é«˜è¡€å£“' : data.sbp >= 120 ? 'è¡€å£“å‡é«˜' : 'æ­£å¸¸', status: data.sbp >= 140 || data.dbp >= 90 ? 'danger' : data.sbp >= 120 ? 'warning' : 'normal' });
            if(data.glucose !== undefined) evaluations.push({ title: 'é£¯å‰è¡€ç³–', value: data.glucose, unit: 'mg/dL', interpretation: data.glucose >= 126 ? 'ç³–å°¿ç—…' : data.glucose >= 100 ? 'ç³–å°¿ç—…å‰æœŸ' : 'æ­£å¸¸', status: data.glucose >= 126 ? 'danger' : data.glucose >= 100 ? 'warning' : 'normal' });
            if(data.hba1c !== undefined) evaluations.push({ title: 'ç³–åŒ–è¡€è‰²ç´  (HbA1C)', value: data.hba1c, unit: '%', interpretation: data.hba1c >= 6.5 ? 'ç³–å°¿ç—…' : data.hba1c >= 5.7 ? 'ç³–å°¿ç—…å‰æœŸ' : 'æ­£å¸¸', status: data.hba1c >= 6.5 ? 'danger' : data.hba1c >= 5.7 ? 'warning' : 'normal' });
            if(data.total_cholesterol !== undefined) evaluations.push({ title: 'ç¸½è†½å›ºé†‡', value: data.total_cholesterol, unit: 'mg/dL', interpretation: data.total_cholesterol >= 240 ? 'éé«˜' : data.total_cholesterol >= 200 ? 'é‚Šç·£æ€§åé«˜' : 'ç†æƒ³', status: data.total_cholesterol >= 240 ? 'danger' : data.total_cholesterol >= 200 ? 'warning' : 'normal' });
            if(data.triglycerides !== undefined) evaluations.push({ title: 'ä¸‰é…¸ç”˜æ²¹é…¯', value: data.triglycerides, unit: 'mg/dL', interpretation: data.triglycerides >= 200 ? 'éé«˜' : data.triglycerides >= 150 ? 'é‚Šç·£æ€§åé«˜' : 'ç†æƒ³', status: data.triglycerides >= 200 ? 'danger' : data.triglycerides >= 150 ? 'warning' : 'normal' });
            if(data.hdl !== undefined) { const isLow = (gender === 'male' && data.hdl < 40) || (gender === 'female' && data.hdl < 50); evaluations.push({ title: 'é«˜å¯†åº¦è„‚è›‹ç™½ (HDL)', value: data.hdl, unit: 'mg/dL', interpretation: isLow ? 'åä½' : 'è‰¯å¥½', status: isLow ? 'warning' : 'normal' }); }
            if(data.ldl !== undefined) evaluations.push({ title: 'ä½å¯†åº¦è„‚è›‹ç™½ (LDL)', value: data.ldl, unit: 'mg/dL', interpretation: data.ldl >= 160 ? 'éé«˜' : data.ldl >= 130 ? 'é‚Šç·£æ€§åé«˜' : 'ç†æƒ³', status: data.ldl >= 160 ? 'danger' : data.ldl >= 130 ? 'warning' : 'normal' });
            if(data.creatinine !== undefined) evaluations.push({ title: 'è¡€æ¸…è‚Œé…¸é…', value: data.creatinine, unit: 'mg/dL', interpretation: 'è…åŠŸèƒ½æŒ‡æ¨™ä¹‹ä¸€', status: 'info'});
            if(data.urine_creatinine !== undefined) evaluations.push({ title: 'å°¿æ¶²è‚Œé…¸é…', value: data.urine_creatinine, unit: 'mg/dL', interpretation: 'å°¿æ¶²æ¿ƒåº¦æŒ‡æ¨™', status: 'info'});
            if(data.egfr !== undefined) {
                let egfrText = data.egfr_calculated ? `${data.egfr} (è¨ˆç®—å€¼)` : data.egfr;
                evaluations.push({ title: 'è…çµ²çƒéæ¿¾ç‡ (eGFR)', value: egfrText, unit: 'mL/min/1.73mÂ²', interpretation: data.egfr < 60 ? 'åŠŸèƒ½ä¸å…¨' : data.egfr < 90 ? 'è¼•åº¦ä¸‹é™' : 'æ­£å¸¸', status: data.egfr < 60 ? 'danger' : data.egfr < 90 ? 'warning' : 'normal' });
            }
            if(data.urine_protein !== undefined) evaluations.push({ title: 'å°¿è›‹ç™½(å®šæ€§)', value: data.urine_protein === 'positive' ? 'ç•°å¸¸ (é™½æ€§)' : 'æ­£å¸¸ (é™°æ€§)', status: data.urine_protein === 'positive' ? 'danger' : 'normal'});
            if(data.acr !== undefined) evaluations.push({ title: 'å°¿æ¶²å¾®é‡ç™½è›‹ç™½/è‚Œé…¸é…æ¯”', value: data.acr, unit: 'mg/g', interpretation: data.acr > 300 ? 'å·¨é‡ç™½è›‹ç™½å°¿' : data.acr >= 30 ? 'å¾®é‡ç™½è›‹ç™½å°¿' : 'æ­£å¸¸', status: data.acr > 300 ? 'danger' : data.acr >= 30 ? 'warning' : 'normal' });
            if(data.got !== undefined) evaluations.push({title: 'è‚æŒ‡æ•¸ (GOT/AST)', value: data.got, unit: 'U/L', interpretation: data.got >= 40 ? 'åé«˜' : 'æ­£å¸¸', status: data.got >= 40 ? 'warning' : 'normal'});
            if(data.gpt !== undefined) evaluations.push({title: 'è‚æŒ‡æ•¸ (GPT/ALT)', value: data.gpt, unit: 'U/L', interpretation: data.gpt >= 40 ? 'åé«˜' : 'æ­£å¸¸', status: data.gpt >= 40 ? 'warning' : 'normal'});
            if(data.uric_acid !== undefined) evaluations.push({title: 'å°¿é…¸', value: data.uric_acid, unit: 'mg/dL', interpretation: data.uric_acid > 7.0 ? 'åé«˜ (é«˜å°¿é…¸è¡€ç—‡)' : 'æ­£å¸¸', status: data.uric_acid > 7.0 ? 'warning' : 'normal'});
            if(data.urine_sugar !== undefined) evaluations.push({title: 'å°¿ç³–', value: data.urine_sugar === 'positive' ? 'ç•°å¸¸ (é™½æ€§)' : 'æ­£å¸¸ (é™°æ€§)', status: data.urine_sugar === 'positive' ? 'warning' : 'normal'});
            if(data.occult_blood !== undefined) evaluations.push({title: 'å°¿æ½›è¡€', value: data.occult_blood === 'positive' ? 'ç•°å¸¸ (é™½æ€§)' : 'æ­£å¸¸ (é™°æ€§)', status: data.occult_blood === 'positive' ? 'warning' : 'normal'});
            if(data.leukocyte !== undefined) evaluations.push({title: 'å°¿ç™½è¡€çƒ', value: data.leukocyte === 'positive' ? 'ç•°å¸¸ (é™½æ€§)' : 'æ­£å¸¸ (é™°æ€§)', status: data.leukocyte === 'positive' ? 'warning' : 'normal'});
            if(data.nitrite !== undefined) evaluations.push({title: 'å°¿äºç¡é…¸é¹½', value: data.nitrite === 'positive' ? 'ç•°å¸¸ (é™½æ€§)' : 'æ­£å¸¸ (é™°æ€§)', status: data.nitrite === 'positive' ? 'danger' : 'normal'});
            if(data.hbsag !== undefined) evaluations.push({title: 'Bå‹è‚ç‚æŠ—åŸ', value: data.hbsag === 'positive' ? 'é™½æ€§' : 'é™°æ€§', status: data.hbsag === 'positive' ? 'danger' : 'normal'});
            if(data.anti_hcv !== undefined) evaluations.push({title: 'Cå‹è‚ç‚æŠ—é«”', value: data.anti_hcv === 'positive' ? 'é™½æ€§' : 'é™°æ€§', status: data.anti_hcv === 'positive' ? 'danger' : 'normal'});
            return evaluations;
        }

        // --- UI Creation Functions ---
        function createResultCard({ title, value, unit, interpretation, status }) {
            const card = document.createElement('div');
            card.className = `result-card p-3 rounded-lg shadow-sm status-${status}`;
            let displayValue = unit ? `<span class="text-2xl">${value}</span><span class="text-sm align-baseline font-normal text-gray-500 ml-1">${unit}</span>` : `<span class="text-2xl">${value}</span>`;
            card.innerHTML = `<p class="text-sm font-medium text-gray-600">${title}</p><p class="font-bold text-gray-900">${displayValue}</p>${interpretation ? `<p class="text-xs font-semibold text-gray-700 mt-1">${interpretation}</p>` : ''}`;
            return card;
        }
        function createSummaryCard({icon, title, status, interpretation}) {
            const card = document.createElement('div');
            card.className = `summary-card border-l-4 status-${status}`;
            card.innerHTML = `<h3 class="font-bold text-gray-800">${icon} ${title}</h3><p class="font-semibold text-lg text-gray-900">${interpretation}</p>`;
            return card;
        }
        function createMetabolicSyndromeCard(syndromeData) {
            const card = document.createElement('div');
            const statusClass = syndromeData.hasSyndrome ? 'status-danger' : 'status-normal';
            const title = syndromeData.hasSyndrome ? `ğŸš¨ ç¬¦åˆä»£è¬ç—‡å€™ç¾¤ (${syndromeData.count}/5)` : `âœ… æœªç¬¦åˆä»£è¬ç—‡å€™ç¾¤ (${syndromeData.count}/5)`;
            let criteriaHtml = syndromeData.criteria.map(c => `<li class="flex items-center text-sm ${c.met ? 'font-semibold text-red-700' : 'text-gray-600'}">${c.met ? '<span class="mr-2">â– </span>' : '<span class="text-green-500 mr-2">â–¡</span>'} ${c.name}: ${c.value}</li>`).join('');
            card.className = `summary-card border-l-4 ${statusClass}`;
            card.innerHTML = `<h3 class="font-bold text-gray-800">${title}</h3><ul class="mt-2 space-y-1">${criteriaHtml}</ul>`;
            return card;
        }
       
        function createCKDCard(gfrStage, albuminuriaStage, egfr, acr) {
            const card = document.createElement('div');
            const ckdStageMap = { 1: 1, 2: 2, 3: 3, 4: 3, 5: 4, 6: 5 };
            const isCKD = (egfr < 60) || (albuminuriaStage > 1 && albuminuriaStage !== 0);
            let currentDisplayStage = isCKD ? ckdStageMap[gfrStage] : 0;

            // --- Part 1: Staging Progress Bar ---
            const stageColors = { 0: 'bg-blue-500', 1: 'bg-green-500', 2: 'bg-yellow-500', 3: 'bg-orange-500', 4: 'bg-red-500', 5: 'bg-red-600' };
            let stageHtml = `<div class="relative w-full h-8 flex items-center">
                                <div class="w-full h-2 bg-gray-200 rounded-full"></div>
                                <div class="absolute w-full h-2 flex items-center">
                                    <div class="w-1/6 h-2 bg-blue-400"></div><div class="w-1/6 h-2 bg-green-400"></div><div class="w-1/6 h-2 bg-yellow-400"></div><div class="w-1/6 h-2 bg-orange-400"></div><div class="w-1/6 h-2 bg-red-400"></div><div class="w-1/6 h-2 bg-red-700"></div>
                                </div>
                                <div class="absolute w-full h-8 flex items-center justify-between">`;
            for (let i = 0; i <= 5; i++) {
                const isCurrent = (i === currentDisplayStage);
                stageHtml += `<div class="w-1/6 flex justify-center"><div class="w-5 h-5 rounded-full flex items-center justify-center text-white font-bold text-xs ${isCurrent ? stageColors[i] : 'bg-gray-300'}">${i===0 ? 'N' : i}</div></div>`;
            }
            stageHtml += `</div></div><div class="flex justify-between text-xs text-gray-500 mt-1"><span>æ­£å¸¸</span><span>è¼•åº¦</span><span class="pl-2">ä¸­åº¦</span><span>é‡åº¦</span><span class="pl-2">æœ«æœŸ</span></div>`;
            
            // --- Part 2: Collapsible Description ---
            const stageDescriptions = [
                { title: 'è…åŠŸèƒ½æ­£å¸¸', criteria: 'eGFR â‰§ 60 ä¸” ç„¡æŒçºŒæ€§è›‹ç™½å°¿', detail: 'æ‚¨çš„è…åŠŸèƒ½æŒ‡æ¨™åœ¨æ­£å¸¸ç¯„åœï¼Œè«‹ç¹¼çºŒä¿æŒå¥åº·ç”Ÿæ´»å‹æ…‹ã€‚'},
                { title: 'æ…¢æ€§è…è‡Ÿç—…ç¬¬ä¸€æœŸ', criteria: 'è…åŠŸèƒ½æ­£å¸¸ eGFR â‰§ 90 ä¸” åˆä½µå°¿è›‹ç™½ç•°å¸¸', detail: 'æ­¤éšæ®µä¸æœƒæœ‰æ˜é¡¯ç—‡ç‹€ï¼Œä½†å¯èƒ½å‡ºç¾å¤œå°¿ ã€å¤šå°¿åŠè¡€å°¿ç­‰æ’å°¿å‹æ…‹ã€‚<br>å»ºè­°å‡è¡¡é£²é£ŸåŠç¶­æŒè‰¯å¥½ç”Ÿæ´»ç¿’æ…£ï¼Œç©æ¥µæ§åˆ¶è¡€ç³–åŠè¡€å£“ï¼Œæ¯åŠå¹´åšè…åŠŸèƒ½æª¢æŸ¥ã€‚'},
                { title: 'æ…¢æ€§è…è‡Ÿç—…ç¬¬äºŒæœŸ', criteria: 'è…åŠŸèƒ½è¼•å¾®ä¸‹é™ 90> eGFR â‰§ 60 ä¸” åˆä½µå°¿è›‹ç™½ç•°å¸¸', detail: 'è…è‡ŸåŠŸèƒ½ç´„æ­£å¸¸äºº60~90%ï¼Œæ‡‰æ³¨æ„å‡è¡¡é£²é£ŸåŠç¶­æŒè‰¯å¥½ç”Ÿæ´»ç¿’æ…£ï¼Œç©æ¥µæ§åˆ¶è¡€ç³–åŠè¡€å£“ï¼Œæ¯åŠå¹´åšè…åŠŸèƒ½æª¢æŸ¥ï¼Œé€éæ²»ç™‚å¾Œè…åŠŸèƒ½æœ‰å¯èƒ½æ¢å¾©æ­£å¸¸ã€‚'},
                { title: 'æ…¢æ€§è…è‡Ÿç—…ç¬¬ä¸‰æœŸ', criteria: 'è…åŠŸèƒ½ä¸­åº¦ç•°å¸¸ 60> eGFR â‰§ 30', detail: 'è…åŠŸèƒ½ç‚ºæ­£å¸¸äººçš„30~59%ï¼Œæ‡‰è©•ä¼°è…è‡Ÿç—…çš„ç›¸é—œä½µç™¼ç—‡ï¼Œèª¿æ•´é£²é£Ÿã€ç”Ÿæ´»ç¿’æ…£ï¼Œæ§åˆ¶è¡€ç³–åŠè¡€å£“ï¼Œç©æ¥µé…åˆæ²»ç™‚æ¸›ç·©è…åŠŸèƒ½çš„ä¸‹é™ã€‚'},
                { title: 'æ…¢æ€§è…è‡Ÿç—…ç¬¬å››æœŸ', criteria: 'è…åŠŸèƒ½é‡åº¦ç•°å¸¸ 30> eGFR â‰§ 15', detail: 'è…åŠŸèƒ½ç´„ç‚ºä¸€èˆ¬äººçš„15~29%ï¼Œæ˜“å‡ºç¾ç–²å‹ã€æ˜“å–˜åŠé«˜è¡€å£“çš„ç—‡ç‹€ï¼Œæ‡‰ç©æ¥µèª¿æ•´é£²é£ŸåŠé…åˆè—¥ç‰©æ§åˆ¶ï¼Œé¿å…è…åŠŸèƒ½å¿«é€Ÿæƒ¡åŒ–ã€‚'},
                { title: 'æ…¢æ€§è…è‡Ÿç—…ç¬¬äº”æœŸ', criteria: 'è…åŠŸèƒ½ç•°å¸¸ eGFR < 15', detail: 'è…è‡ŸåŠŸèƒ½ç´„ç‚ºä¸€èˆ¬äººçš„15%ä»¥ä¸‹ï¼Œè…è‡Ÿç„¡æ³•æ­£å¸¸ä»£è¬é‹ä½œï¼Œé–‹å§‹å‡ºç¾å°¿æ¯’ç—‡ç‹€ï¼Œæ‡‰åŠæ—©èˆ‡é†«å¸«è¨è«–å¾ŒçºŒè…è‡Ÿæ›¿ä»£ç™‚æ³•çš„é¸æ“‡ã€‚'}
            ];
            const descIndex = isCKD ? ckdStageMap[gfrStage] : 0;
            const descriptionHtml = `
                <div class="mt-4 p-3 bg-gray-50 rounded-lg">
                    <h4 class="font-bold text-lg text-gray-800">${stageDescriptions[descIndex].title}</h4>
                    <p class="text-sm font-semibold ${isCKD ? 'text-red-600' : 'text-green-600'} mt-1">${stageDescriptions[descIndex].criteria}</p>
                    <p class="text-xs text-gray-600 mt-2">${stageDescriptions[descIndex].detail}</p>
                </div>`;

            // --- Part 3: New Visual Matrix ---
             const riskMatrixColors = [
                ['ckd-green', 'ckd-yellow', 'ckd-orange'], ['ckd-green', 'ckd-yellow', 'ckd-orange'],
                ['ckd-yellow', 'ckd-orange', 'ckd-red'], ['ckd-orange', 'ckd-red', 'ckd-red'],
                ['ckd-red', 'ckd-red', 'ckd-red'], ['ckd-red', 'ckd-red', 'ckd-red']
            ];

            const matrixHtml = `
            <div class="grid grid-cols-[auto_1fr_auto] gap-1 mt-4">
                <!-- Top Header -->
                <div class="bg-gray-700 text-white p-2 rounded-tl-md flex items-center justify-center">
                    <h4 class="font-bold text-sm">æ…¢æ€§è…è‡Ÿç—…é¢¨éšª</h4>
                </div>
                <div class="p-1 text-center text-sm font-bold text-white bg-teal-600 rounded-t-md">è›‹ç™½å°¿åš´é‡åº¦</div>
                <div class="p-1 bg-gray-100 rounded-tr-md"></div>

                <!-- GFR Title -->
                <div class="p-1 flex items-center justify-center bg-gray-200 rounded-l-md">
                    <span class="font-bold text-sm text-gray-600" style="writing-mode: vertical-rl; text-orientation: mixed;">è…çµ²çƒéæ¿¾ç‡</span>
                </div>
                
                <!-- Main Grid -->
                <div class="grid grid-cols-3 grid-rows-7 gap-1">
                    <!-- Albuminuria Sub-headers -->
                    <div class="p-1 text-center text-xs font-bold text-gray-700">A1 æ­£å¸¸<br>&lt;30 mg/g</div>
                    <div class="p-1 text-center text-xs font-bold text-gray-700">A2 å¾®é‡<br>30-300 mg/g</div>
                    <div class="p-1 text-center text-xs font-bold text-gray-700">A3 å·¨é‡<br>&gt;300 mg/g</div>
                    
                    <!-- GFR & Risk Cells -->
                    ${[1, 2, 3, 4, 5, 6].map(g => {
                        let rowContent = '';
                        if (albuminuriaStage === 0) {
                             rowContent += `<div class="col-span-3 h-full rounded ${g === gfrStage ? 'ckd-row-highlight bg-gray-300' : 'bg-gray-200'} flex items-center justify-center text-xs text-gray-600 font-semibold p-1">ç¼ºä¹è›‹ç™½å°¿æ•¸æ“š</div>`;
                        } else {
                            for (let a = 1; a <= 3; a++) {
                                const isCurrent = (g === gfrStage && a === albuminuriaStage);
                                rowContent += `<div class="h-full min-h-[2.5rem] rounded ${riskMatrixColors[g - 1][a - 1]} ${isCurrent ? 'ckd-cell-highlight' : ''}"></div>`;
                            }
                        }
                        return rowContent;
                    }).join('')}
                </div>
                
                <!-- Risk Gradient Bar -->
                <div class="flex flex-col items-center justify-between text-xs font-semibold text-gray-500 bg-gray-100 rounded-r-md py-2">
                    <span style="writing-mode: vertical-rl; text-orientation: mixed;">é¢¨éšªä½</span>
                    <div class="w-2 flex-1 mx-auto my-1 bg-gradient-to-t from-red-500 via-orange-400 via-yellow-300 to-green-400 rounded-full"></div>
                    <span style="writing-mode: vertical-rl; text-orientation: mixed;">éå¸¸é«˜</span>
                </div>
            </div>`;
            
            // --- Final Card Assembly ---
            const title = isCKD ? "ğŸš¨ æ…¢æ€§è…è‡Ÿç—… (CKD) é¢¨éšªè©•ä¼°" : "âœ… è…åŠŸèƒ½è©•ä¼°";
            const borderColorClass = isCKD ? 'status-danger' : 'status-normal';

            card.className = `summary-card border-l-4 ${borderColorClass}`;
            card.innerHTML = `<h3 class="font-bold text-gray-800">${title}</h3>
                              <div class="my-3">${stageHtml}</div>
                              ${descriptionHtml}
                              ${matrixHtml}`;
            return card;
        }

        function createDiabetesCard(currentStatus, suggestion, hba1c) {
             const card = document.createElement('div');
             const statuses = [
                { status: 1, text: "æ­£å¸¸", value: "&lt; 5.7%", highlightClass: "bg-green-500 text-white" },
                { status: 2, text: "ç³–å°¿ç—…å‰æœŸ", value: "5.7-6.4%", highlightClass: "bg-yellow-500 text-black" },
                { status: 3, text: "ç³–å°¿ç—…", value: "â‰¥ 6.5%", highlightClass: "bg-red-500 text-white" }
            ];

            let statusHtml = `<div class="grid grid-cols-3 gap-0 text-center rounded-lg overflow-hidden border">`;
            statuses.forEach(s => {
                const isCurrent = s.status === currentStatus;
                statusHtml += `
                    <div class=" ${isCurrent ? s.highlightClass : 'bg-gray-100 text-gray-600'}">
                        <div class="p-2 font-bold text-sm whitespace-nowrap">${s.text}</div>
                        <div class="text-xs pb-1 opacity-80">${s.value}</div>
                    </div>
                `;
            });
            statusHtml += `</div>`;

            const titleIcon = currentStatus > 1 ? 'âš ï¸' : 'âœ…';
            
            card.className = `summary-card border-l-4 ${currentStatus === 1 ? 'status-normal' : currentStatus === 2 ? 'status-warning' : 'status-danger'}`;
            card.innerHTML = `<h3 class="font-bold text-gray-800">${titleIcon} ç³–å°¿ç—…è©•ä¼°</h3>
                              <p class="text-sm text-gray-600 mb-2">æ‚¨ç›®å‰çš„ HbA1c: <b>${hba1c}%</b></p>
                             ${statusHtml}
                             <div class="mt-3 p-2 bg-indigo-50 border border-indigo-200 rounded-md">
                                <h4 class="text-sm font-semibold text-indigo-800">åˆæ­¥ç”¨è—¥å»ºè­°åƒè€ƒ</h4>
                                <p class="text-sm text-indigo-700">${suggestion}</p>
                             </div>`;
             return card;
        }
        function createDyslipidemiaCard({isNormal, hasHypercholesterolemia, hasHypertriglyceridemia }) {
            const card = document.createElement('div');
            if (isNormal) {
                card.className = `summary-card border-l-4 status-normal`;
                card.innerHTML = `<h3 class="font-bold text-gray-800">âœ… è¡€è„‚è‚ªè©•ä¼°</h3><p class="font-semibold text-lg text-gray-900">è¡€è„‚è‚ªå¤§è‡´æ­£å¸¸</p>`;
                return card;
            }

            card.className = `summary-card border-l-4 status-warning`;
            const hcHtml = `<div class="p-2 rounded-md text-sm ${hasHypercholesterolemia ? 'bg-yellow-200 border border-yellow-400' : 'bg-gray-100'}">é«˜è¡€è†½å›ºé†‡ç—‡</div>`;
            const htgHtml = `<div class="p-2 rounded-md text-sm ${hasHypertriglyceridemia ? 'bg-yellow-200 border border-yellow-400' : 'bg-gray-100'}">é«˜ä¸‰é…¸ç”˜æ²¹é…¯è¡€ç—‡</div>`;
            const link = `<div class="mt-2"><a href="#" onclick="event.preventDefault(); alert('æ­¤åŠŸèƒ½å°‡é€£çµè‡³åå¹´å¿ƒè¡€ç®¡ç–¾ç—…é¢¨éšª(ASCVD)è¨ˆç®—å™¨ï¼Œå¹«åŠ©æ‚¨èˆ‡é†«å¸«è©•ä¼°æ˜¯å¦éœ€è¦è—¥ç‰©ä»‹å…¥ã€‚æ­¤ç‚ºåŠŸèƒ½ç¤ºæ„ã€‚')" class="text-sm text-indigo-600 hover:text-indigo-800 font-semibold">è©•ä¼°å¿ƒè¡€ç®¡é¢¨éšªèˆ‡ç”¨è—¥å¿…è¦æ€§ &rarr;</a></div>`;

            card.innerHTML = `<h3 class="font-bold text-gray-800">âš ï¸ è¡€è„‚è‚ªè©•ä¼°</h3>
                             <div class="grid grid-cols-2 gap-2 my-2">${hcHtml}${htgHtml}</div>
                             ${link}`;
            return card;
        }
    </script>
</body>
</html>
